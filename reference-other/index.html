
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://imperialcollegelondon.github.io/wsi/reference-other/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>API Reference - Other Components - WSIMOD docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference-other-components" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="WSIMOD docs" class="md-header__button md-logo" aria-label="WSIMOD docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WSIMOD docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference - Other Components
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ImperialCollegeLondon/wsi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="WSIMOD docs" class="md-nav__button md-logo" aria-label="WSIMOD docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    WSIMOD docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ImperialCollegeLondon/wsi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../paper/paper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../component-library/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Component library
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../wsimod-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command line interface
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dafni/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run WSIMOD in DAFNI
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../demo/scripts/quickstart_demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart (.py)
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../coverage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coverage report
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/barneydobson/wsi" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WSIMOD repository
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.catchment" class="md-nav__link">
    <span class="md-ellipsis">
      catchment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.catchment.Catchment" class="md-nav__link">
    <span class="md-ellipsis">
      Catchment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Catchment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.catchment.Catchment.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.catchment.Catchment.end_timestep_" class="md-nav__link">
    <span class="md-ellipsis">
      end_timestep_
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.catchment.Catchment.get_avail" class="md-nav__link">
    <span class="md-ellipsis">
      get_avail
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.catchment.Catchment.get_flow" class="md-nav__link">
    <span class="md-ellipsis">
      get_flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.catchment.Catchment.pull_check_abstraction" class="md-nav__link">
    <span class="md-ellipsis">
      pull_check_abstraction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.catchment.Catchment.pull_set_abstraction" class="md-nav__link">
    <span class="md-ellipsis">
      pull_set_abstraction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.catchment.Catchment.route" class="md-nav__link">
    <span class="md-ellipsis">
      route
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.demand" class="md-nav__link">
    <span class="md-ellipsis">
      demand
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.Demand" class="md-nav__link">
    <span class="md-ellipsis">
      Demand
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Demand">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.Demand.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.Demand.apply_overrides" class="md-nav__link">
    <span class="md-ellipsis">
      apply_overrides
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.Demand.create_demand" class="md-nav__link">
    <span class="md-ellipsis">
      create_demand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.Demand.end_timestep" class="md-nav__link">
    <span class="md-ellipsis">
      end_timestep
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.Demand.get_demand" class="md-nav__link">
    <span class="md-ellipsis">
      get_demand
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.NonResidentialDemand" class="md-nav__link">
    <span class="md-ellipsis">
      NonResidentialDemand
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NonResidentialDemand">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.NonResidentialDemand.get_demand" class="md-nav__link">
    <span class="md-ellipsis">
      get_demand
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.ResidentialDemand" class="md-nav__link">
    <span class="md-ellipsis">
      ResidentialDemand
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ResidentialDemand">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.ResidentialDemand.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.ResidentialDemand.apply_gardening_pollutants" class="md-nav__link">
    <span class="md-ellipsis">
      apply_gardening_pollutants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.ResidentialDemand.apply_overrides" class="md-nav__link">
    <span class="md-ellipsis">
      apply_overrides
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.ResidentialDemand.excess_to_garden_demand" class="md-nav__link">
    <span class="md-ellipsis">
      excess_to_garden_demand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.ResidentialDemand.get_demand" class="md-nav__link">
    <span class="md-ellipsis">
      get_demand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.ResidentialDemand.get_garden_demand" class="md-nav__link">
    <span class="md-ellipsis">
      get_garden_demand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.demand.ResidentialDemand.get_house_demand" class="md-nav__link">
    <span class="md-ellipsis">
      get_house_demand
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution" class="md-nav__link">
    <span class="md-ellipsis">
      distribution
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution.Distribution" class="md-nav__link">
    <span class="md-ellipsis">
      Distribution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Distribution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution.Distribution.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution.Distribution.apply_overrides" class="md-nav__link">
    <span class="md-ellipsis">
      apply_overrides
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution.Distribution.decorate_pull_handlers" class="md-nav__link">
    <span class="md-ellipsis">
      decorate_pull_handlers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution.UnlimitedDistribution" class="md-nav__link">
    <span class="md-ellipsis">
      UnlimitedDistribution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnlimitedDistribution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution.UnlimitedDistribution.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution.UnlimitedDistribution.end_timestep" class="md-nav__link">
    <span class="md-ellipsis">
      end_timestep
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution.UnlimitedDistribution.pull_set_unlimited" class="md-nav__link">
    <span class="md-ellipsis">
      pull_set_unlimited
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution.decorate_leakage_check" class="md-nav__link">
    <span class="md-ellipsis">
      decorate_leakage_check
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.distribution.decorate_leakage_set" class="md-nav__link">
    <span class="md-ellipsis">
      decorate_leakage_set
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.waste" class="md-nav__link">
    <span class="md-ellipsis">
      waste
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wsimod.nodes.waste.Waste" class="md-nav__link">
    <span class="md-ellipsis">
      Waste
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Waste">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.waste.Waste.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsimod.nodes.waste.Waste.push_set_accept" class="md-nav__link">
    <span class="md-ellipsis">
      push_set_accept
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-reference-other-components">API Reference - Other Components</h1>
<p>This section of the documentation provides a reference for the API of the  nodes.catchment, nodes.demand, nodes.distribution, and nodes.waste modules.</p>


<div class="doc doc-object doc-module">



<a id="wsimod.nodes.catchment"></a>
    <div class="doc doc-contents first">

        <p>Created on Mon Nov 15 14:20:36 2021.</p>
<p>@author: bdobson</p>
<p>Converted to totals on 2022-05-03</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="wsimod.nodes.catchment.Catchment" class="doc doc-heading">
            <code>Catchment</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wsimod.nodes.nodes.Node" href="../reference-nodes/#wsimod.nodes.nodes.Node">Node</a></code></p>


        






              <details class="quote">
                <summary>Source code in <code>wsimod/nodes/catchment.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Catchment</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">data_input_dict</span><span class="o">=</span><span class="p">{},</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Node that reads input data to create VQIPs that are pushed downstream and</span>
<span class="sd">        tracks abstractions made from the node, adjusting pushes accordingly.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Node name</span>
<span class="sd">            data_input_dict (dict, optional): Dictionary of data inputs relevant for</span>
<span class="sd">                the node. Keys are tuples where first value is the name of the</span>
<span class="sd">                variable to read from the dict and the second value is the time.</span>
<span class="sd">                Defaults to {}.</span>

<span class="sd">        Functions intended to call in orchestration:</span>
<span class="sd">            route</span>

<span class="sd">        Key assumptions:</span>
<span class="sd">            - Flows from `Catchment` nodes are simply read from data, thus</span>
<span class="sd">                assumed to be unresponsive to wider water cycle changes.</span>

<span class="sd">        Input data and parameter requirements:</span>
<span class="sd">            - Flow data in the `data_input_dict` at the model timestep.</span>
<span class="sd">                _Units_: cubic metres/timestep</span>
<span class="sd">            - Values for each variable defined in `constants.POLLUTANTS` also</span>
<span class="sd">                stored in `data_input_dict` at the model timestep.</span>
<span class="sd">                _Units_: kg/m3/timestep (additive pollutants)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Update args</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_input_dict</span> <span class="o">=</span> <span class="n">data_input_dict</span>

        <span class="c1"># Update handlers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_abstraction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_abstraction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_set_deny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_set_deny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unrouted_water</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
        <span class="c1"># Mass balance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_in</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_flow</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">unrouted_water</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_timestep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_timestep_</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read volume data, read pollutant data, convert additibve pollutants from</span>
<span class="sd">        kg/m3 to kg.</span>

<span class="sd">        Returns:</span>
<span class="sd">            vqip (dict): Return read data as a VQIP</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO (if used) - note that if flow is &lt; float accuracy then it won&#39;t</span>
        <span class="c1"># get pushed, and the pollutants will &#39;disappear&#39;, causing a mass balance error</span>
        <span class="n">vqip</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;volume&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_input_dict</span><span class="p">[(</span><span class="s2">&quot;flow&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">)]}</span>
        <span class="k">for</span> <span class="n">pollutant</span> <span class="ow">in</span> <span class="n">constants</span><span class="o">.</span><span class="n">POLLUTANTS</span><span class="p">:</span>
            <span class="n">vqip</span><span class="p">[</span><span class="n">pollutant</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_input_dict</span><span class="p">[(</span><span class="n">pollutant</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">pollutant</span> <span class="ow">in</span> <span class="n">constants</span><span class="o">.</span><span class="n">ADDITIVE_POLLUTANTS</span><span class="p">:</span>
            <span class="n">vqip</span><span class="p">[</span><span class="n">pollutant</span><span class="p">]</span> <span class="o">*=</span> <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">vqip</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">route</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send any water that has not already been abstracted downstream.&quot;&quot;&quot;</span>
        <span class="c1"># Get amount of water</span>
        <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_avail</span><span class="p">()</span>
        <span class="c1"># Route excess flow onwards</span>
        <span class="n">reply</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_distributed</span><span class="p">(</span><span class="n">avail</span><span class="p">,</span> <span class="n">of_type</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Node&quot;</span><span class="p">,</span> <span class="s2">&quot;River&quot;</span><span class="p">,</span> <span class="s2">&quot;Waste&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unrouted_water</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unrouted_water</span><span class="p">,</span> <span class="n">reply</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reply</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">constants</span><span class="o">.</span><span class="n">FLOAT_ACCURACY</span><span class="p">:</span>
            <span class="k">pass</span>
            <span class="c1"># print(&#39;Catchment unable to route&#39;)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_avail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Water available for abstraction (Read data and subtract pre-existing</span>
<span class="sd">        abstractions).</span>

<span class="sd">        Returns:</span>
<span class="sd">            avail (dict): A VQIP of water available for abstraction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get available vqip</span>
        <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_flow</span><span class="p">()</span>

        <span class="c1"># Remove abstractions already made</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">arc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_arcs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="n">avail</span><span class="p">,</span> <span class="n">avail</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">arc</span><span class="o">.</span><span class="n">vqip_in</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">avail</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pull_check_abstraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vqip</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check wrapper for get_avail that updates response if VQIP is given.</span>

<span class="sd">        Args:</span>
<span class="sd">            vqip (dict, optional): A VQIP that is compared with get_avail and the</span>
<span class="sd">                minimum is returned. Only the &#39;volume&#39; key is used. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            avail (dict): A VQIP of water available for abstraction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Respond to abstraction check request</span>
        <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_avail</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">vqip</span><span class="p">:</span>
            <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="n">avail</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">avail</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">],</span> <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]))</span>

        <span class="k">return</span> <span class="n">avail</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pull_set_abstraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vqip</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Request set wrapper for get_avail where VQIP is specified.</span>

<span class="sd">        Args:</span>
<span class="sd">            vqip (dict): A VQIP of water to pull. Only the &#39;volume&#39; key is used.</span>

<span class="sd">        Returns:</span>
<span class="sd">            avail (dict): A VQIP of water abstracted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Respond to abstraction set request</span>
        <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_avail</span><span class="p">()</span>
        <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="n">avail</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">avail</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">],</span> <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]))</span>

        <span class="k">return</span> <span class="n">avail</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">end_timestep_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset unrouted water.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unrouted_water</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.catchment.Catchment.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">data_input_dict</span><span class="o">=</span><span class="p">{})</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Node that reads input data to create VQIPs that are pushed downstream and
tracks abstractions made from the node, adjusting pushes accordingly.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data_input_dict</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of data inputs relevant for
the node. Keys are tuples where first value is the name of the
variable to read from the dict and the second value is the time.
Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="functions-intended-to-call-in-orchestration" open>
  <summary>Functions intended to call in orchestration</summary>
  <p>route</p>
</details>

<details class="key-assumptions" open>
  <summary>Key assumptions</summary>
  <ul>
<li>Flows from <code>Catchment</code> nodes are simply read from data, thus
    assumed to be unresponsive to wider water cycle changes.</li>
</ul>
</details>

<details class="input-data-and-parameter-requirements" open>
  <summary>Input data and parameter requirements</summary>
  <ul>
<li>Flow data in the <code>data_input_dict</code> at the model timestep.
    <em>Units</em>: cubic metres/timestep</li>
<li>Values for each variable defined in <code>constants.POLLUTANTS</code> also
    stored in <code>data_input_dict</code> at the model timestep.
    <em>Units</em>: kg/m3/timestep (additive pollutants)</li>
</ul>
</details>
            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/catchment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">,</span>
    <span class="n">data_input_dict</span><span class="o">=</span><span class="p">{},</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Node that reads input data to create VQIPs that are pushed downstream and</span>
<span class="sd">    tracks abstractions made from the node, adjusting pushes accordingly.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Node name</span>
<span class="sd">        data_input_dict (dict, optional): Dictionary of data inputs relevant for</span>
<span class="sd">            the node. Keys are tuples where first value is the name of the</span>
<span class="sd">            variable to read from the dict and the second value is the time.</span>
<span class="sd">            Defaults to {}.</span>

<span class="sd">    Functions intended to call in orchestration:</span>
<span class="sd">        route</span>

<span class="sd">    Key assumptions:</span>
<span class="sd">        - Flows from `Catchment` nodes are simply read from data, thus</span>
<span class="sd">            assumed to be unresponsive to wider water cycle changes.</span>

<span class="sd">    Input data and parameter requirements:</span>
<span class="sd">        - Flow data in the `data_input_dict` at the model timestep.</span>
<span class="sd">            _Units_: cubic metres/timestep</span>
<span class="sd">        - Values for each variable defined in `constants.POLLUTANTS` also</span>
<span class="sd">            stored in `data_input_dict` at the model timestep.</span>
<span class="sd">            _Units_: kg/m3/timestep (additive pollutants)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Update args</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_input_dict</span> <span class="o">=</span> <span class="n">data_input_dict</span>

    <span class="c1"># Update handlers</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_abstraction</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_abstraction</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">push_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_set_deny</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">push_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_set_deny</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unrouted_water</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
    <span class="c1"># Mass balance</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_in</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_flow</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">unrouted_water</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end_timestep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_timestep_</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.catchment.Catchment.end_timestep_" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">end_timestep_</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Reset unrouted water.</p>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/catchment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">end_timestep_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reset unrouted water.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unrouted_water</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.catchment.Catchment.get_avail" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_avail</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Water available for abstraction (Read data and subtract pre-existing
abstractions).</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>avail</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP of water available for abstraction</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/catchment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_avail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Water available for abstraction (Read data and subtract pre-existing</span>
<span class="sd">    abstractions).</span>

<span class="sd">    Returns:</span>
<span class="sd">        avail (dict): A VQIP of water available for abstraction</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get available vqip</span>
    <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_flow</span><span class="p">()</span>

    <span class="c1"># Remove abstractions already made</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">arc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_arcs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="n">avail</span><span class="p">,</span> <span class="n">avail</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">arc</span><span class="o">.</span><span class="n">vqip_in</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">avail</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.catchment.Catchment.get_flow" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_flow</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Read volume data, read pollutant data, convert additibve pollutants from
kg/m3 to kg.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>vqip</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Return read data as a VQIP</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/catchment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read volume data, read pollutant data, convert additibve pollutants from</span>
<span class="sd">    kg/m3 to kg.</span>

<span class="sd">    Returns:</span>
<span class="sd">        vqip (dict): Return read data as a VQIP</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO (if used) - note that if flow is &lt; float accuracy then it won&#39;t</span>
    <span class="c1"># get pushed, and the pollutants will &#39;disappear&#39;, causing a mass balance error</span>
    <span class="n">vqip</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;volume&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_input_dict</span><span class="p">[(</span><span class="s2">&quot;flow&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">)]}</span>
    <span class="k">for</span> <span class="n">pollutant</span> <span class="ow">in</span> <span class="n">constants</span><span class="o">.</span><span class="n">POLLUTANTS</span><span class="p">:</span>
        <span class="n">vqip</span><span class="p">[</span><span class="n">pollutant</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_input_dict</span><span class="p">[(</span><span class="n">pollutant</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">pollutant</span> <span class="ow">in</span> <span class="n">constants</span><span class="o">.</span><span class="n">ADDITIVE_POLLUTANTS</span><span class="p">:</span>
        <span class="n">vqip</span><span class="p">[</span><span class="n">pollutant</span><span class="p">]</span> <span class="o">*=</span> <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">vqip</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.catchment.Catchment.pull_check_abstraction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pull_check_abstraction</span><span class="p">(</span><span class="n">vqip</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Check wrapper for get_avail that updates response if VQIP is given.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vqip</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP that is compared with get_avail and the
minimum is returned. Only the 'volume' key is used. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>avail</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP of water available for abstraction</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/catchment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pull_check_abstraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vqip</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check wrapper for get_avail that updates response if VQIP is given.</span>

<span class="sd">    Args:</span>
<span class="sd">        vqip (dict, optional): A VQIP that is compared with get_avail and the</span>
<span class="sd">            minimum is returned. Only the &#39;volume&#39; key is used. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        avail (dict): A VQIP of water available for abstraction</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Respond to abstraction check request</span>
    <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_avail</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">vqip</span><span class="p">:</span>
        <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="n">avail</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">avail</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">],</span> <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]))</span>

    <span class="k">return</span> <span class="n">avail</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.catchment.Catchment.pull_set_abstraction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pull_set_abstraction</span><span class="p">(</span><span class="n">vqip</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Request set wrapper for get_avail where VQIP is specified.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vqip</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP of water to pull. Only the 'volume' key is used.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>avail</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP of water abstracted</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/catchment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pull_set_abstraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vqip</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Request set wrapper for get_avail where VQIP is specified.</span>

<span class="sd">    Args:</span>
<span class="sd">        vqip (dict): A VQIP of water to pull. Only the &#39;volume&#39; key is used.</span>

<span class="sd">    Returns:</span>
<span class="sd">        avail (dict): A VQIP of water abstracted</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Respond to abstraction set request</span>
    <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_avail</span><span class="p">()</span>
    <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="n">avail</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">avail</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">],</span> <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]))</span>

    <span class="k">return</span> <span class="n">avail</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.catchment.Catchment.route" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">route</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Send any water that has not already been abstracted downstream.</p>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/catchment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">route</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send any water that has not already been abstracted downstream.&quot;&quot;&quot;</span>
    <span class="c1"># Get amount of water</span>
    <span class="n">avail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_avail</span><span class="p">()</span>
    <span class="c1"># Route excess flow onwards</span>
    <span class="n">reply</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_distributed</span><span class="p">(</span><span class="n">avail</span><span class="p">,</span> <span class="n">of_type</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Node&quot;</span><span class="p">,</span> <span class="s2">&quot;River&quot;</span><span class="p">,</span> <span class="s2">&quot;Waste&quot;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unrouted_water</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unrouted_water</span><span class="p">,</span> <span class="n">reply</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">reply</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">constants</span><span class="o">.</span><span class="n">FLOAT_ACCURACY</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="wsimod.nodes.demand"></a>
    <div class="doc doc-contents first">

        <p>Created on Mon Nov 15 14:20:36 2021.</p>
<p>@author: bdobson</p>
<p>Converted to totals BD 2022-05-03</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="wsimod.nodes.demand.Demand" class="doc doc-heading">
            <code>Demand</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wsimod.nodes.nodes.Node" href="../reference-nodes/#wsimod.nodes.nodes.Node">Node</a></code></p>


        






              <details class="quote">
                <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Demand</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">constant_demand</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">pollutant_load</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">data_input_dict</span><span class="o">=</span><span class="p">{},</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Node that generates and moves water. Currently only subclass</span>
<span class="sd">        ResidentialDemand is in use.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): node name constant_demand (float, optional): A constant portion</span>
<span class="sd">            of demand if no subclass</span>
<span class="sd">                is used. Defaults to 0.</span>
<span class="sd">            pollutant_load (dict, optional): Pollutant mass per timestep of</span>
<span class="sd">            constant_demand.</span>
<span class="sd">                Defaults to 0.</span>
<span class="sd">            data_input_dict (dict, optional):  Dictionary of data inputs relevant for</span>
<span class="sd">                the node (temperature). Keys are tuples where first value is the name of</span>
<span class="sd">                the variable to read from the dict and the second value is the time.</span>
<span class="sd">                Defaults to {}</span>

<span class="sd">        Functions intended to call in orchestration:</span>
<span class="sd">            create_demand</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO should temperature be defined in pollutant dict? TODO a lot of this</span>
        <span class="c1"># should be moved to ResidentialDemand Assign parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constant_demand</span> <span class="o">=</span> <span class="n">constant_demand</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pollutant_load</span> <span class="o">=</span> <span class="n">pollutant_load</span>
        <span class="c1"># Update args</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">data_input_dict</span><span class="o">=</span><span class="n">data_input_dict</span><span class="p">)</span>
        <span class="c1"># Update handlers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_set_deny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_check_deny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_deny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_deny</span>

        <span class="c1"># Initialise states</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_backup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>  <span class="c1"># ew</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>

        <span class="c1"># Mass balance Because we assume demand is always satisfied received water</span>
        <span class="c1"># &#39;disappears&#39; for mass balance and consumed water &#39;appears&#39; (this makes)</span>
        <span class="c1"># introduction of pollutants easy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_in</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_backup</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">apply_overrides</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overrides</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply overrides to the sewer.</span>

<span class="sd">        Enables a user to override any of the following parameters:</span>
<span class="sd">        constant_demand, pollutant_load.</span>

<span class="sd">        Args:</span>
<span class="sd">            overrides (dict, optional): Dictionary of overrides. Defaults to {}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constant_demand</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;constant_demand&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_demand</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pollutant_load</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pollutant_load&quot;</span><span class="p">,</span> <span class="p">{}))</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">apply_overrides</span><span class="p">(</span><span class="n">overrides</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function to call get_demand, which should return a dict with keys that match</span>
<span class="sd">        the keys in directions.</span>

<span class="sd">        A dict that determines how to push_distributed the generated wastewater/garden</span>
<span class="sd">        irrigation. Water is drawn from attached nodes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_demand</span><span class="p">()</span>
        <span class="n">total_requested</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">dem</span> <span class="ow">in</span> <span class="n">demand</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">total_requested</span> <span class="o">+=</span> <span class="n">dem</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_distributed</span><span class="p">({</span><span class="s2">&quot;volume&quot;</span><span class="p">:</span> <span class="n">total_requested</span><span class="p">})</span>

        <span class="c1"># TODO Currently just assume all water is received and then pushed onwards</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">total_requested</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">constants</span><span class="o">.</span><span class="n">FLOAT_ACCURACY</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;demand deficit of </span><span class="si">{2}</span><span class="s2"> at </span><span class="si">{0}</span><span class="s2"> on </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">total_requested</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="n">directions</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;garden&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;Demand&quot;</span><span class="p">,</span> <span class="s2">&quot;Garden&quot;</span><span class="p">),</span> <span class="s2">&quot;of_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Land&quot;</span><span class="p">},</span>
            <span class="s2">&quot;house&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Demand&quot;</span><span class="p">,</span> <span class="s2">&quot;of_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Sewer&quot;</span><span class="p">},</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;of_type&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span>
        <span class="p">}</span>

        <span class="c1"># Send water where it needs to go</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">demand</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># Distribute</span>
            <span class="n">remaining</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_distributed</span><span class="p">(</span>
                <span class="n">item</span><span class="p">,</span> <span class="n">of_type</span><span class="o">=</span><span class="n">directions</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;of_type&quot;</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">directions</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;tag&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_backup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_backup</span><span class="p">,</span> <span class="n">remaining</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">remaining</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">constants</span><span class="o">.</span><span class="n">FLOAT_ACCURACY</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Demand not able to push&quot;</span><span class="p">)</span>

        <span class="c1"># Update for mass balance</span>
        <span class="k">for</span> <span class="n">dem</span> <span class="ow">in</span> <span class="n">demand</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span><span class="p">,</span> <span class="n">dem</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Holder function to enable constant demand generation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (dict): A VQIP that will contain constant demand</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO read/gen demand</span>
        <span class="n">pol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_demand</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pollutant_load</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">pol</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">pol</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">end_timestep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset state variable trackers.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_backup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.Demand.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">constant_demand</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pollutant_load</span><span class="o">=</span><span class="p">{},</span> <span class="n">data_input_dict</span><span class="o">=</span><span class="p">{})</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Node that generates and moves water. Currently only subclass
ResidentialDemand is in use.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>node name constant_demand (float, optional): A constant portion</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pollutant_load</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pollutant mass per timestep of</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data_input_dict</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of data inputs relevant for
the node (temperature). Keys are tuples where first value is the name of
the variable to read from the dict and the second value is the time.
Defaults to {}</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="functions-intended-to-call-in-orchestration" open>
  <summary>Functions intended to call in orchestration</summary>
  <p>create_demand</p>
</details>
            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">,</span>
    <span class="n">constant_demand</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">pollutant_load</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">data_input_dict</span><span class="o">=</span><span class="p">{},</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Node that generates and moves water. Currently only subclass</span>
<span class="sd">    ResidentialDemand is in use.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): node name constant_demand (float, optional): A constant portion</span>
<span class="sd">        of demand if no subclass</span>
<span class="sd">            is used. Defaults to 0.</span>
<span class="sd">        pollutant_load (dict, optional): Pollutant mass per timestep of</span>
<span class="sd">        constant_demand.</span>
<span class="sd">            Defaults to 0.</span>
<span class="sd">        data_input_dict (dict, optional):  Dictionary of data inputs relevant for</span>
<span class="sd">            the node (temperature). Keys are tuples where first value is the name of</span>
<span class="sd">            the variable to read from the dict and the second value is the time.</span>
<span class="sd">            Defaults to {}</span>

<span class="sd">    Functions intended to call in orchestration:</span>
<span class="sd">        create_demand</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO should temperature be defined in pollutant dict? TODO a lot of this</span>
    <span class="c1"># should be moved to ResidentialDemand Assign parameters</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constant_demand</span> <span class="o">=</span> <span class="n">constant_demand</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pollutant_load</span> <span class="o">=</span> <span class="n">pollutant_load</span>
    <span class="c1"># Update args</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">data_input_dict</span><span class="o">=</span><span class="n">data_input_dict</span><span class="p">)</span>
    <span class="c1"># Update handlers</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">push_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_set_deny</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">push_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_check_deny</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_deny</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_deny</span>

    <span class="c1"># Initialise states</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_backup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>  <span class="c1"># ew</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>

    <span class="c1"># Mass balance Because we assume demand is always satisfied received water</span>
    <span class="c1"># &#39;disappears&#39; for mass balance and consumed water &#39;appears&#39; (this makes)</span>
    <span class="c1"># introduction of pollutants easy</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_in</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_backup</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.Demand.apply_overrides" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_overrides</span><span class="p">(</span><span class="n">overrides</span><span class="o">=</span><span class="p">{})</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Apply overrides to the sewer.</p>
<p>Enables a user to override any of the following parameters:
constant_demand, pollutant_load.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>overrides</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of overrides. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">apply_overrides</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overrides</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply overrides to the sewer.</span>

<span class="sd">    Enables a user to override any of the following parameters:</span>
<span class="sd">    constant_demand, pollutant_load.</span>

<span class="sd">    Args:</span>
<span class="sd">        overrides (dict, optional): Dictionary of overrides. Defaults to {}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constant_demand</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;constant_demand&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_demand</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pollutant_load</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pollutant_load&quot;</span><span class="p">,</span> <span class="p">{}))</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">apply_overrides</span><span class="p">(</span><span class="n">overrides</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.Demand.create_demand" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_demand</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Function to call get_demand, which should return a dict with keys that match
the keys in directions.</p>
<p>A dict that determines how to push_distributed the generated wastewater/garden
irrigation. Water is drawn from attached nodes.</p>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to call get_demand, which should return a dict with keys that match</span>
<span class="sd">    the keys in directions.</span>

<span class="sd">    A dict that determines how to push_distributed the generated wastewater/garden</span>
<span class="sd">    irrigation. Water is drawn from attached nodes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_demand</span><span class="p">()</span>
    <span class="n">total_requested</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">dem</span> <span class="ow">in</span> <span class="n">demand</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">total_requested</span> <span class="o">+=</span> <span class="n">dem</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_distributed</span><span class="p">({</span><span class="s2">&quot;volume&quot;</span><span class="p">:</span> <span class="n">total_requested</span><span class="p">})</span>

    <span class="c1"># TODO Currently just assume all water is received and then pushed onwards</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">total_requested</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">constants</span><span class="o">.</span><span class="n">FLOAT_ACCURACY</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;demand deficit of </span><span class="si">{2}</span><span class="s2"> at </span><span class="si">{0}</span><span class="s2"> on </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">total_requested</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="n">directions</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;garden&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;Demand&quot;</span><span class="p">,</span> <span class="s2">&quot;Garden&quot;</span><span class="p">),</span> <span class="s2">&quot;of_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Land&quot;</span><span class="p">},</span>
        <span class="s2">&quot;house&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Demand&quot;</span><span class="p">,</span> <span class="s2">&quot;of_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Sewer&quot;</span><span class="p">},</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;of_type&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="c1"># Send water where it needs to go</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">demand</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># Distribute</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_distributed</span><span class="p">(</span>
            <span class="n">item</span><span class="p">,</span> <span class="n">of_type</span><span class="o">=</span><span class="n">directions</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;of_type&quot;</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">directions</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;tag&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_backup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_backup</span><span class="p">,</span> <span class="n">remaining</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">remaining</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">constants</span><span class="o">.</span><span class="n">FLOAT_ACCURACY</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Demand not able to push&quot;</span><span class="p">)</span>

    <span class="c1"># Update for mass balance</span>
    <span class="k">for</span> <span class="n">dem</span> <span class="ow">in</span> <span class="n">demand</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span><span class="p">,</span> <span class="n">dem</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.Demand.end_timestep" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">end_timestep</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Reset state variable trackers.</p>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">end_timestep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reset state variable trackers.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_demand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_backup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_received</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.Demand.get_demand" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_demand</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Holder function to enable constant demand generation.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP that will contain constant demand</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Holder function to enable constant demand generation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (dict): A VQIP that will contain constant demand</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO read/gen demand</span>
    <span class="n">pol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_demand</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pollutant_load</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">pol</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">pol</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wsimod.nodes.demand.NonResidentialDemand" class="doc doc-heading">
            <code>NonResidentialDemand</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wsimod.nodes.demand.Demand" href="#wsimod.nodes.demand.Demand">Demand</a></code></p>


        <p>Holder class to enable non-residential demand generation.</p>






              <details class="quote">
                <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">NonResidentialDemand</span><span class="p">(</span><span class="n">Demand</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Holder class to enable non-residential demand generation.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Holder function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (dict): A dict of VQIPs, where the keys match with directions</span>
<span class="sd">                in Demand/create_demand</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;house&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_demand</span><span class="p">()}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.NonResidentialDemand.get_demand" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_demand</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Holder function.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dict of VQIPs, where the keys match with directions
in Demand/create_demand</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Holder function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (dict): A dict of VQIPs, where the keys match with directions</span>
<span class="sd">            in Demand/create_demand</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;house&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_demand</span><span class="p">()}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wsimod.nodes.demand.ResidentialDemand" class="doc doc-heading">
            <code>ResidentialDemand</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wsimod.nodes.demand.Demand" href="#wsimod.nodes.demand.Demand">Demand</a></code></p>


        






              <details class="quote">
                <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ResidentialDemand</span><span class="p">(</span><span class="n">Demand</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">population</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">pollutant_load</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">per_capita</span><span class="o">=</span><span class="mf">0.12</span><span class="p">,</span>
        <span class="n">gardening_efficiency</span><span class="o">=</span><span class="mf">0.6</span> <span class="o">*</span> <span class="mf">0.7</span><span class="p">,</span>  <span class="c1"># Watering efficiency by irrigated area</span>
        <span class="n">data_input_dict</span><span class="o">=</span><span class="p">{},</span>  <span class="c1"># For temperature</span>
        <span class="n">constant_temp</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">constant_weighting</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Subclass of demand with functions to handle internal and external water use.</span>

<span class="sd">        Args:</span>
<span class="sd">            population (float, optional): population of node. Defaults to 1. per_capita</span>
<span class="sd">            (float, optional): Volume per person per timestep of water</span>
<span class="sd">                used. Defaults to 0.12.</span>
<span class="sd">            pollutant_load (dict, optional): Mass per person per timestep of</span>
<span class="sd">                different pollutants generated. Defaults to {}.</span>
<span class="sd">            gardening_efficiency (float, optional): Value between 0 and 1 that</span>
<span class="sd">                translates irrigation demand from GardenSurface into water requested</span>
<span class="sd">                from the distribution network. Should account for percent of garden that</span>
<span class="sd">                is irrigated and the efficacy of people in meeting their garden water</span>
<span class="sd">                demand. Defaults to 0.6*0.7.</span>
<span class="sd">            data_input_dict (dict, optional):  Dictionary of data inputs relevant for</span>
<span class="sd">                the node (temperature). Keys are tuples where first value is the name of</span>
<span class="sd">                the variable to read from the dict and the second value is the time.</span>
<span class="sd">                Defaults to {}</span>
<span class="sd">            constant_temp (float, optional): A constant temperature associated with</span>
<span class="sd">                generated water. Defaults to 30</span>
<span class="sd">            constant_weighting (float, optional): Proportion of temperature that is</span>
<span class="sd">                made up from by constant_temp. Defaults to 0.2.</span>

<span class="sd">        Key assumptions:</span>
<span class="sd">            - Per capita calculations to generate demand based on population.</span>
<span class="sd">            - Pollutant concentration of generated demand uses a fixed mass per person</span>
<span class="sd">              per timestep.</span>
<span class="sd">            - Temperature of generated wastewater is based partially on air temperature</span>
<span class="sd">              and partially on a constant.</span>
<span class="sd">            - Can interact with `land.py/GardenSurface` to simulate garden water use.</span>

<span class="sd">        Input data and parameter requirements:</span>
<span class="sd">            - `population`.</span>
<span class="sd">                _Units_: n</span>
<span class="sd">            - `per_capita`.</span>
<span class="sd">                _Units_: m3/timestep</span>
<span class="sd">            - `data_input_dict` should contain air temperature at model timestep.</span>
<span class="sd">                _Units_: C</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gardening_efficiency</span> <span class="o">=</span> <span class="n">gardening_efficiency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">population</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">per_capita</span> <span class="o">=</span> <span class="n">per_capita</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constant_weighting</span> <span class="o">=</span> <span class="n">constant_weighting</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constant_temp</span> <span class="o">=</span> <span class="n">constant_temp</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">data_input_dict</span><span class="o">=</span><span class="n">data_input_dict</span><span class="p">,</span> <span class="n">pollutant_load</span><span class="o">=</span><span class="n">pollutant_load</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="c1"># Label as Demand class so that other nodes treat it the same</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="s2">&quot;Demand&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">apply_overrides</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overrides</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply overrides to the sewer.</span>

<span class="sd">        Enables a user to override any of the following parameters:</span>
<span class="sd">        gardening_efficiency, population, per_capita, constant_weighting, constant_temp.</span>

<span class="sd">        Args:</span>
<span class="sd">            overrides (dict, optional): Dictionary of overrides. Defaults to {}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gardening_efficiency</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;gardening_efficiency&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gardening_efficiency</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;population&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">per_capita</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;per_capita&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_capita</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constant_weighting</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;constant_weighting&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_weighting</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constant_temp</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;constant_temp&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_temp</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">apply_overrides</span><span class="p">(</span><span class="n">overrides</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Overwrite get_demand and replace with custom functions.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (dict): A dict of VQIPs, where the keys match with directions</span>
<span class="sd">                in Demand/create_demand</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">water_output</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">water_output</span><span class="p">[</span><span class="s2">&quot;garden&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_garden_demand</span><span class="p">()</span>
        <span class="n">water_output</span><span class="p">[</span><span class="s2">&quot;house&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_house_demand</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">water_output</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_garden_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate garden water demand in the current timestep by get_connected to all</span>
<span class="sd">        attached land nodes. This check should return garden water demand. Applies</span>
<span class="sd">        irrigation coefficient. Can function when a single population node is connected</span>
<span class="sd">        to multiple land nodes, however, the capacity and preferences of arcs should be</span>
<span class="sd">        updated to reflect what is possible based on area.</span>

<span class="sd">        Returns:</span>
<span class="sd">            vqip (dict): A VQIP of garden water use (including pollutants) to be</span>
<span class="sd">                pushed to land</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get garden water demand</span>
        <span class="n">excess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connected</span><span class="p">(</span>
            <span class="n">direction</span><span class="o">=</span><span class="s2">&quot;push&quot;</span><span class="p">,</span> <span class="n">of_type</span><span class="o">=</span><span class="s2">&quot;Land&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Demand&quot;</span><span class="p">,</span> <span class="s2">&quot;Garden&quot;</span><span class="p">)</span>
        <span class="p">)[</span><span class="s2">&quot;avail&quot;</span><span class="p">]</span>

        <span class="c1"># Apply garden_efficiency</span>
        <span class="n">excess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">excess_to_garden_demand</span><span class="p">(</span><span class="n">excess</span><span class="p">)</span>

        <span class="c1"># Apply any pollutants</span>
        <span class="n">vqip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_gardening_pollutants</span><span class="p">(</span><span class="n">excess</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vqip</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">apply_gardening_pollutants</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">excess</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Holder function to apply pollutants (i.e., presumably fertiliser) to the</span>
<span class="sd">        garden.</span>

<span class="sd">        Args:</span>
<span class="sd">            excess (float): A volume of water applied to a garden</span>

<span class="sd">        Returns:</span>
<span class="sd">            (dict): A VQIP of water that includes pollutants to be sent to land</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO Fertilisers are currently applied in the land node... which is</span>
        <span class="c1"># preferable?</span>
        <span class="n">vqip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
        <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">excess</span>
        <span class="k">return</span> <span class="n">vqip</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">excess_to_garden_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">excess</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply garden_efficiency.</span>

<span class="sd">        Args:</span>
<span class="sd">            excess (float): Volume of water required to satisfy garden irrigation</span>

<span class="sd">        Returns:</span>
<span class="sd">            (float): Amount of water actually applied to garden</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO Anything more than this needed? (yes - population presence if eventually</span>
        <span class="c1"># included!)</span>

        <span class="k">return</span> <span class="n">excess</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">gardening_efficiency</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_house_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Per capita calculations for household wastewater generation. Applies weighted</span>
<span class="sd">        temperature calculation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (dict): A VQIP containg foul water</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO water that is consumed but not sent onwards as foul Total water required</span>
        <span class="n">consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_capita</span>
        <span class="c1"># Apply pollutants</span>
        <span class="n">foul</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pollutant_load</span><span class="p">)</span>
        <span class="c1"># Scale to population</span>
        <span class="k">for</span> <span class="n">pol</span> <span class="ow">in</span> <span class="n">constants</span><span class="o">.</span><span class="n">ADDITIVE_POLLUTANTS</span><span class="p">:</span>
            <span class="n">foul</span><span class="p">[</span><span class="n">pol</span><span class="p">]</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span>
        <span class="c1"># Update volume and temperature (which is weighted based on air temperature and</span>
        <span class="c1"># constant_temp)</span>
        <span class="n">foul</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">consumption</span>
        <span class="n">foul</span><span class="p">[</span><span class="s2">&quot;temperature&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_data_input</span><span class="p">(</span><span class="s2">&quot;temperature&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_weighting</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_temp</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_weighting</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">foul</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.ResidentialDemand.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">population</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pollutant_load</span><span class="o">=</span><span class="p">{},</span> <span class="n">per_capita</span><span class="o">=</span><span class="mf">0.12</span><span class="p">,</span> <span class="n">gardening_efficiency</span><span class="o">=</span><span class="mf">0.6</span> <span class="o">*</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">data_input_dict</span><span class="o">=</span><span class="p">{},</span> <span class="n">constant_temp</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">constant_weighting</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Subclass of demand with functions to handle internal and external water use.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>population</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>population of node. Defaults to 1. per_capita</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>(float,</code>
            </td>
            <td>
                  <code><span title="optional">optional</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Volume per person per timestep of water
used. Defaults to 0.12.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pollutant_load</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mass per person per timestep of
different pollutants generated. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>gardening_efficiency</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Value between 0 and 1 that
translates irrigation demand from GardenSurface into water requested
from the distribution network. Should account for percent of garden that
is irrigated and the efficacy of people in meeting their garden water
demand. Defaults to 0.6*0.7.</p>
              </div>
            </td>
            <td>
                  <code>0.6 * 0.7</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data_input_dict</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of data inputs relevant for
the node (temperature). Keys are tuples where first value is the name of
the variable to read from the dict and the second value is the time.
Defaults to {}</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>constant_temp</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A constant temperature associated with
generated water. Defaults to 30</p>
              </div>
            </td>
            <td>
                  <code>30</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>constant_weighting</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Proportion of temperature that is
made up from by constant_temp. Defaults to 0.2.</p>
              </div>
            </td>
            <td>
                  <code>0.2</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="key-assumptions" open>
  <summary>Key assumptions</summary>
  <ul>
<li>Per capita calculations to generate demand based on population.</li>
<li>Pollutant concentration of generated demand uses a fixed mass per person
  per timestep.</li>
<li>Temperature of generated wastewater is based partially on air temperature
  and partially on a constant.</li>
<li>Can interact with <code>land.py/GardenSurface</code> to simulate garden water use.</li>
</ul>
</details>

<details class="input-data-and-parameter-requirements" open>
  <summary>Input data and parameter requirements</summary>
  <ul>
<li><code>population</code>.
    <em>Units</em>: n</li>
<li><code>per_capita</code>.
    <em>Units</em>: m3/timestep</li>
<li><code>data_input_dict</code> should contain air temperature at model timestep.
    <em>Units</em>: C</li>
</ul>
</details>
            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">population</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">pollutant_load</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">per_capita</span><span class="o">=</span><span class="mf">0.12</span><span class="p">,</span>
    <span class="n">gardening_efficiency</span><span class="o">=</span><span class="mf">0.6</span> <span class="o">*</span> <span class="mf">0.7</span><span class="p">,</span>  <span class="c1"># Watering efficiency by irrigated area</span>
    <span class="n">data_input_dict</span><span class="o">=</span><span class="p">{},</span>  <span class="c1"># For temperature</span>
    <span class="n">constant_temp</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">constant_weighting</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Subclass of demand with functions to handle internal and external water use.</span>

<span class="sd">    Args:</span>
<span class="sd">        population (float, optional): population of node. Defaults to 1. per_capita</span>
<span class="sd">        (float, optional): Volume per person per timestep of water</span>
<span class="sd">            used. Defaults to 0.12.</span>
<span class="sd">        pollutant_load (dict, optional): Mass per person per timestep of</span>
<span class="sd">            different pollutants generated. Defaults to {}.</span>
<span class="sd">        gardening_efficiency (float, optional): Value between 0 and 1 that</span>
<span class="sd">            translates irrigation demand from GardenSurface into water requested</span>
<span class="sd">            from the distribution network. Should account for percent of garden that</span>
<span class="sd">            is irrigated and the efficacy of people in meeting their garden water</span>
<span class="sd">            demand. Defaults to 0.6*0.7.</span>
<span class="sd">        data_input_dict (dict, optional):  Dictionary of data inputs relevant for</span>
<span class="sd">            the node (temperature). Keys are tuples where first value is the name of</span>
<span class="sd">            the variable to read from the dict and the second value is the time.</span>
<span class="sd">            Defaults to {}</span>
<span class="sd">        constant_temp (float, optional): A constant temperature associated with</span>
<span class="sd">            generated water. Defaults to 30</span>
<span class="sd">        constant_weighting (float, optional): Proportion of temperature that is</span>
<span class="sd">            made up from by constant_temp. Defaults to 0.2.</span>

<span class="sd">    Key assumptions:</span>
<span class="sd">        - Per capita calculations to generate demand based on population.</span>
<span class="sd">        - Pollutant concentration of generated demand uses a fixed mass per person</span>
<span class="sd">          per timestep.</span>
<span class="sd">        - Temperature of generated wastewater is based partially on air temperature</span>
<span class="sd">          and partially on a constant.</span>
<span class="sd">        - Can interact with `land.py/GardenSurface` to simulate garden water use.</span>

<span class="sd">    Input data and parameter requirements:</span>
<span class="sd">        - `population`.</span>
<span class="sd">            _Units_: n</span>
<span class="sd">        - `per_capita`.</span>
<span class="sd">            _Units_: m3/timestep</span>
<span class="sd">        - `data_input_dict` should contain air temperature at model timestep.</span>
<span class="sd">            _Units_: C</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gardening_efficiency</span> <span class="o">=</span> <span class="n">gardening_efficiency</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">population</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">per_capita</span> <span class="o">=</span> <span class="n">per_capita</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constant_weighting</span> <span class="o">=</span> <span class="n">constant_weighting</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constant_temp</span> <span class="o">=</span> <span class="n">constant_temp</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">data_input_dict</span><span class="o">=</span><span class="n">data_input_dict</span><span class="p">,</span> <span class="n">pollutant_load</span><span class="o">=</span><span class="n">pollutant_load</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="c1"># Label as Demand class so that other nodes treat it the same</span>
    <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="s2">&quot;Demand&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.ResidentialDemand.apply_gardening_pollutants" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_gardening_pollutants</span><span class="p">(</span><span class="n">excess</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Holder function to apply pollutants (i.e., presumably fertiliser) to the
garden.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>excess</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A volume of water applied to a garden</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP of water that includes pollutants to be sent to land</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">apply_gardening_pollutants</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">excess</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Holder function to apply pollutants (i.e., presumably fertiliser) to the</span>
<span class="sd">    garden.</span>

<span class="sd">    Args:</span>
<span class="sd">        excess (float): A volume of water applied to a garden</span>

<span class="sd">    Returns:</span>
<span class="sd">        (dict): A VQIP of water that includes pollutants to be sent to land</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO Fertilisers are currently applied in the land node... which is</span>
    <span class="c1"># preferable?</span>
    <span class="n">vqip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
    <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">excess</span>
    <span class="k">return</span> <span class="n">vqip</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.ResidentialDemand.apply_overrides" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_overrides</span><span class="p">(</span><span class="n">overrides</span><span class="o">=</span><span class="p">{})</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Apply overrides to the sewer.</p>
<p>Enables a user to override any of the following parameters:
gardening_efficiency, population, per_capita, constant_weighting, constant_temp.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>overrides</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of overrides. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">apply_overrides</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overrides</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply overrides to the sewer.</span>

<span class="sd">    Enables a user to override any of the following parameters:</span>
<span class="sd">    gardening_efficiency, population, per_capita, constant_weighting, constant_temp.</span>

<span class="sd">    Args:</span>
<span class="sd">        overrides (dict, optional): Dictionary of overrides. Defaults to {}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gardening_efficiency</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
        <span class="s2">&quot;gardening_efficiency&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gardening_efficiency</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;population&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">per_capita</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;per_capita&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_capita</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constant_weighting</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
        <span class="s2">&quot;constant_weighting&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_weighting</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constant_temp</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;constant_temp&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_temp</span><span class="p">)</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">apply_overrides</span><span class="p">(</span><span class="n">overrides</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.ResidentialDemand.excess_to_garden_demand" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">excess_to_garden_demand</span><span class="p">(</span><span class="n">excess</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Apply garden_efficiency.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>excess</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Volume of water required to satisfy garden irrigation</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Amount of water actually applied to garden</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">excess_to_garden_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">excess</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply garden_efficiency.</span>

<span class="sd">    Args:</span>
<span class="sd">        excess (float): Volume of water required to satisfy garden irrigation</span>

<span class="sd">    Returns:</span>
<span class="sd">        (float): Amount of water actually applied to garden</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO Anything more than this needed? (yes - population presence if eventually</span>
    <span class="c1"># included!)</span>

    <span class="k">return</span> <span class="n">excess</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">gardening_efficiency</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.ResidentialDemand.get_demand" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_demand</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Overwrite get_demand and replace with custom functions.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dict of VQIPs, where the keys match with directions
in Demand/create_demand</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Overwrite get_demand and replace with custom functions.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (dict): A dict of VQIPs, where the keys match with directions</span>
<span class="sd">            in Demand/create_demand</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">water_output</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">water_output</span><span class="p">[</span><span class="s2">&quot;garden&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_garden_demand</span><span class="p">()</span>
    <span class="n">water_output</span><span class="p">[</span><span class="s2">&quot;house&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_house_demand</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">water_output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.ResidentialDemand.get_garden_demand" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_garden_demand</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Calculate garden water demand in the current timestep by get_connected to all
attached land nodes. This check should return garden water demand. Applies
irrigation coefficient. Can function when a single population node is connected
to multiple land nodes, however, the capacity and preferences of arcs should be
updated to reflect what is possible based on area.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>vqip</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP of garden water use (including pollutants) to be
pushed to land</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_garden_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate garden water demand in the current timestep by get_connected to all</span>
<span class="sd">    attached land nodes. This check should return garden water demand. Applies</span>
<span class="sd">    irrigation coefficient. Can function when a single population node is connected</span>
<span class="sd">    to multiple land nodes, however, the capacity and preferences of arcs should be</span>
<span class="sd">    updated to reflect what is possible based on area.</span>

<span class="sd">    Returns:</span>
<span class="sd">        vqip (dict): A VQIP of garden water use (including pollutants) to be</span>
<span class="sd">            pushed to land</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get garden water demand</span>
    <span class="n">excess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_connected</span><span class="p">(</span>
        <span class="n">direction</span><span class="o">=</span><span class="s2">&quot;push&quot;</span><span class="p">,</span> <span class="n">of_type</span><span class="o">=</span><span class="s2">&quot;Land&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Demand&quot;</span><span class="p">,</span> <span class="s2">&quot;Garden&quot;</span><span class="p">)</span>
    <span class="p">)[</span><span class="s2">&quot;avail&quot;</span><span class="p">]</span>

    <span class="c1"># Apply garden_efficiency</span>
    <span class="n">excess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">excess_to_garden_demand</span><span class="p">(</span><span class="n">excess</span><span class="p">)</span>

    <span class="c1"># Apply any pollutants</span>
    <span class="n">vqip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_gardening_pollutants</span><span class="p">(</span><span class="n">excess</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">vqip</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.demand.ResidentialDemand.get_house_demand" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_house_demand</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Per capita calculations for household wastewater generation. Applies weighted
temperature calculation.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP containg foul water</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/demand.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_house_demand</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Per capita calculations for household wastewater generation. Applies weighted</span>
<span class="sd">    temperature calculation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        (dict): A VQIP containg foul water</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO water that is consumed but not sent onwards as foul Total water required</span>
    <span class="n">consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_capita</span>
    <span class="c1"># Apply pollutants</span>
    <span class="n">foul</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pollutant_load</span><span class="p">)</span>
    <span class="c1"># Scale to population</span>
    <span class="k">for</span> <span class="n">pol</span> <span class="ow">in</span> <span class="n">constants</span><span class="o">.</span><span class="n">ADDITIVE_POLLUTANTS</span><span class="p">:</span>
        <span class="n">foul</span><span class="p">[</span><span class="n">pol</span><span class="p">]</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span>
    <span class="c1"># Update volume and temperature (which is weighted based on air temperature and</span>
    <span class="c1"># constant_temp)</span>
    <span class="n">foul</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">consumption</span>
    <span class="n">foul</span><span class="p">[</span><span class="s2">&quot;temperature&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_data_input</span><span class="p">(</span><span class="s2">&quot;temperature&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_weighting</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_temp</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant_weighting</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">foul</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="wsimod.nodes.distribution"></a>
    <div class="doc doc-contents first">

        <p>Created on Sun Aug 14 16:27:14 2022.</p>
<p>@author: bdobson</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="wsimod.nodes.distribution.Distribution" class="doc doc-heading">
            <code>Distribution</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wsimod.nodes.nodes.Node" href="../reference-nodes/#wsimod.nodes.nodes.Node">Node</a></code></p>


        






              <details class="quote">
                <summary>Source code in <code>wsimod/nodes/distribution.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Distribution</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leakage</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A Node that cannot be pushed to. Intended to pass calls to FWTW - though this</span>
<span class="sd">        currently relies on the user to connect it properly.</span>

<span class="sd">        Args:</span>
<span class="sd">            leakage (float, optional): 1 &gt; float &gt;= 0 to express how much</span>
<span class="sd">                water should be leaked to any attached groundwater nodes. This</span>
<span class="sd">                number represents the proportion of total flow through the node</span>
<span class="sd">                that should be leaked.</span>
<span class="sd">                Defaults to 0.</span>

<span class="sd">        Functions intended to call in orchestration:</span>
<span class="sd">            None</span>

<span class="sd">        Key assumptions:</span>
<span class="sd">            - No distribution processes yet represented, this class is just</span>
<span class="sd">                for conveyance.</span>

<span class="sd">        Input data and parameter requirements:</span>
<span class="sd">            - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span> <span class="o">=</span> <span class="n">leakage</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># Update handlers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_set_deny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_check_deny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decorate_pull_handlers</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">decorate_pull_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Decorate handlers if there is leakage ratio.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">decorate_leakage_set</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">decorate_leakage_check</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">apply_overrides</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overrides</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply overrides to the sewer.</span>

<span class="sd">        Enables a user to override any of the following parameters:</span>
<span class="sd">        leakage.</span>

<span class="sd">        Args:</span>
<span class="sd">            overrides (dict, optional): Dictionary of overrides. Defaults to {}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;leakage&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decorate_pull_handlers</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">apply_overrides</span><span class="p">(</span><span class="n">overrides</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.distribution.Distribution.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">leakage</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>A Node that cannot be pushed to. Intended to pass calls to FWTW - though this
currently relies on the user to connect it properly.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>leakage</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>1 &gt; float &gt;= 0 to express how much
water should be leaked to any attached groundwater nodes. This
number represents the proportion of total flow through the node
that should be leaked.
Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="functions-intended-to-call-in-orchestration" open>
  <summary>Functions intended to call in orchestration</summary>
  <p>None</p>
</details>

<details class="key-assumptions" open>
  <summary>Key assumptions</summary>
  <ul>
<li>No distribution processes yet represented, this class is just
    for conveyance.</li>
</ul>
</details>

<details class="input-data-and-parameter-requirements" open>
  <summary>Input data and parameter requirements</summary>
  <ul>
<li>None</li>
</ul>
</details>
            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leakage</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Node that cannot be pushed to. Intended to pass calls to FWTW - though this</span>
<span class="sd">    currently relies on the user to connect it properly.</span>

<span class="sd">    Args:</span>
<span class="sd">        leakage (float, optional): 1 &gt; float &gt;= 0 to express how much</span>
<span class="sd">            water should be leaked to any attached groundwater nodes. This</span>
<span class="sd">            number represents the proportion of total flow through the node</span>
<span class="sd">            that should be leaked.</span>
<span class="sd">            Defaults to 0.</span>

<span class="sd">    Functions intended to call in orchestration:</span>
<span class="sd">        None</span>

<span class="sd">    Key assumptions:</span>
<span class="sd">        - No distribution processes yet represented, this class is just</span>
<span class="sd">            for conveyance.</span>

<span class="sd">    Input data and parameter requirements:</span>
<span class="sd">        - None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span> <span class="o">=</span> <span class="n">leakage</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Update handlers</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">push_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_set_deny</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">push_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_check_deny</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decorate_pull_handlers</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.distribution.Distribution.apply_overrides" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_overrides</span><span class="p">(</span><span class="n">overrides</span><span class="o">=</span><span class="p">{})</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Apply overrides to the sewer.</p>
<p>Enables a user to override any of the following parameters:
leakage.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>overrides</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of overrides. Defaults to {}.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">apply_overrides</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overrides</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply overrides to the sewer.</span>

<span class="sd">    Enables a user to override any of the following parameters:</span>
<span class="sd">    leakage.</span>

<span class="sd">    Args:</span>
<span class="sd">        overrides (dict, optional): Dictionary of overrides. Defaults to {}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;leakage&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decorate_pull_handlers</span><span class="p">()</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">apply_overrides</span><span class="p">(</span><span class="n">overrides</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.distribution.Distribution.decorate_pull_handlers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">decorate_pull_handlers</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Decorate handlers if there is leakage ratio.</p>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">decorate_pull_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorate handlers if there is leakage ratio.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">decorate_leakage_set</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">decorate_leakage_check</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wsimod.nodes.distribution.UnlimitedDistribution" class="doc doc-heading">
            <code>UnlimitedDistribution</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wsimod.nodes.distribution.Distribution" href="#wsimod.nodes.distribution.Distribution">Distribution</a></code></p>


        






              <details class="quote">
                <summary>Source code in <code>wsimod/nodes/distribution.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">UnlimitedDistribution</span><span class="p">(</span><span class="n">Distribution</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A distribution node that provides unlimited water while tracking pass</span>
<span class="sd">        balance.</span>

<span class="sd">        Functions intended to call in orchestration:</span>
<span class="sd">            None</span>

<span class="sd">        Key assumptions:</span>
<span class="sd">            - Water demand is always satisfied.</span>

<span class="sd">        Input data and parameter requirements:</span>
<span class="sd">            - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># Update handlers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_unlimited</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">(),</span> <span class="n">constants</span><span class="o">.</span><span class="n">UNBOUNDED_CAPACITY</span>
        <span class="p">)</span>

        <span class="c1"># States</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">supplied</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_in</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">supplied</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pull_set_unlimited</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vqip</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Respond that VQIP was fulfilled and update state variables for mass balance.</span>

<span class="sd">        Args:</span>
<span class="sd">            vqip (dict): A VQIP amount to request</span>

<span class="sd">        Returns:</span>
<span class="sd">            vqip (dict): A VQIP amount that was supplied</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO maybe need some pollutant concentrations?</span>
        <span class="n">vqip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">(),</span> <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">supplied</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supplied</span><span class="p">,</span> <span class="n">vqip</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vqip</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">end_timestep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update state variables.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">supplied</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.distribution.UnlimitedDistribution.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>A distribution node that provides unlimited water while tracking pass
balance.</p>


<details class="functions-intended-to-call-in-orchestration" open>
  <summary>Functions intended to call in orchestration</summary>
  <p>None</p>
</details>

<details class="key-assumptions" open>
  <summary>Key assumptions</summary>
  <ul>
<li>Water demand is always satisfied.</li>
</ul>
</details>

<details class="input-data-and-parameter-requirements" open>
  <summary>Input data and parameter requirements</summary>
  <ul>
<li>None</li>
</ul>
</details>
            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A distribution node that provides unlimited water while tracking pass</span>
<span class="sd">    balance.</span>

<span class="sd">    Functions intended to call in orchestration:</span>
<span class="sd">        None</span>

<span class="sd">    Key assumptions:</span>
<span class="sd">        - Water demand is always satisfied.</span>

<span class="sd">    Input data and parameter requirements:</span>
<span class="sd">        - None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Update handlers</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_unlimited</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">(),</span> <span class="n">constants</span><span class="o">.</span><span class="n">UNBOUNDED_CAPACITY</span>
    <span class="p">)</span>

    <span class="c1"># States</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">supplied</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_in</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">supplied</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.distribution.UnlimitedDistribution.end_timestep" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">end_timestep</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Update state variables.</p>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">end_timestep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update state variables.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">supplied</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.distribution.UnlimitedDistribution.pull_set_unlimited" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pull_set_unlimited</span><span class="p">(</span><span class="n">vqip</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Respond that VQIP was fulfilled and update state variables for mass balance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vqip</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP amount to request</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>vqip</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP amount that was supplied</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pull_set_unlimited</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vqip</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Respond that VQIP was fulfilled and update state variables for mass balance.</span>

<span class="sd">    Args:</span>
<span class="sd">        vqip (dict): A VQIP amount to request</span>

<span class="sd">    Returns:</span>
<span class="sd">        vqip (dict): A VQIP amount that was supplied</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO maybe need some pollutant concentrations?</span>
    <span class="n">vqip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">(),</span> <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">supplied</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_vqip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">supplied</span><span class="p">,</span> <span class="n">vqip</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">vqip</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="wsimod.nodes.distribution.decorate_leakage_check" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">decorate_leakage_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Decorator to extend the functionality of <code>f</code> by introducing leakage. This is
achieved by adjusting the volume of the request (vqip) to include anticipated
leakage and then calling the original function <code>f</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>self</code>
            </td>
            <td>
                  <code>instance of Distribution class</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Distribution object to be
extended</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>f</code>
            </td>
            <td>
                  <code><span title="function">function</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to be extended. Expected to be the
Distribution object's pull_set function.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>pull_check</code></td>            <td>
                  <code><span title="function">function</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The decorated function which includes the
original functionality of <code>f</code> and additional leakage operations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">decorate_leakage_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to extend the functionality of `f` by introducing leakage. This is</span>
<span class="sd">    achieved by adjusting the volume of the request (vqip) to include anticipated</span>
<span class="sd">    leakage and then calling the original function `f`.</span>

<span class="sd">    Args:</span>
<span class="sd">        self (instance of Distribution class): The Distribution object to be</span>
<span class="sd">            extended</span>
<span class="sd">        f (function): The function to be extended. Expected to be the</span>
<span class="sd">            Distribution object&#39;s pull_set function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pull_check (function): The decorated function which includes the</span>
<span class="sd">            original functionality of `f` and additional leakage operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pull_check</span><span class="p">(</span><span class="n">vqip</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Args:</span>
<span class="sd">            vqip:</span>
<span class="sd">            **kwargs:</span>

<span class="sd">        Returns:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">vqip</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">/=</span> <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span>
        <span class="n">reply</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">vqip</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">amount_leaked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="n">reply</span><span class="p">,</span> <span class="n">reply</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span><span class="p">)</span>

        <span class="n">reply</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_vqip</span><span class="p">(</span><span class="n">reply</span><span class="p">,</span> <span class="n">amount_leaked</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">reply</span>

    <span class="k">return</span> <span class="n">pull_check</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="wsimod.nodes.distribution.decorate_leakage_set" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">decorate_leakage_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Decorator to extend the functionality of <code>f</code> by introducing leakage. This is
achieved by adjusting the volume of the request (vqip) to include anticipated
leakage, calling the original function <code>f</code>, and then distributing the leaked amount
to groundwater.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>self</code>
            </td>
            <td>
                  <code>instance of Distribution class</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Distribution object to be
extended</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>f</code>
            </td>
            <td>
                  <code><span title="function">function</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to be extended. Expected to be the
Distribution object's pull_set function.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>pull_set</code></td>            <td>
                  <code><span title="function">function</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The decorated function which includes the
original functionality of <code>f</code> and additional leakage operations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">decorate_leakage_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to extend the functionality of `f` by introducing leakage. This is</span>
<span class="sd">    achieved by adjusting the volume of the request (vqip) to include anticipated</span>
<span class="sd">    leakage, calling the original function `f`, and then distributing the leaked amount</span>
<span class="sd">    to groundwater.</span>

<span class="sd">    Args:</span>
<span class="sd">        self (instance of Distribution class): The Distribution object to be</span>
<span class="sd">            extended</span>
<span class="sd">        f (function): The function to be extended. Expected to be the</span>
<span class="sd">            Distribution object&#39;s pull_set function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        pull_set (function): The decorated function which includes the</span>
<span class="sd">            original functionality of `f` and additional leakage operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pull_set</span><span class="p">(</span><span class="n">vqip</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Args:</span>
<span class="sd">            vqip:</span>
<span class="sd">            **kwargs:</span>

<span class="sd">        Returns:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vqip</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">/=</span> <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span>

        <span class="n">reply</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">vqip</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">amount_leaked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v_change_vqip</span><span class="p">(</span><span class="n">reply</span><span class="p">,</span> <span class="n">reply</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">leakage</span><span class="p">)</span>

        <span class="n">reply</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_vqip</span><span class="p">(</span><span class="n">reply</span><span class="p">,</span> <span class="n">amount_leaked</span><span class="p">)</span>

        <span class="n">unsuccessful_leakage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_distributed</span><span class="p">(</span>
            <span class="n">amount_leaked</span><span class="p">,</span> <span class="n">of_type</span><span class="o">=</span><span class="s2">&quot;Groundwater&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">unsuccessful_leakage</span><span class="p">[</span><span class="s2">&quot;volume&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">constants</span><span class="o">.</span><span class="n">FLOAT_ACCURACY</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;warning, distribution leakage not going to GW in </span><span class="si">{0}</span><span class="s2"> at </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">t</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">reply</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_vqip</span><span class="p">(</span><span class="n">reply</span><span class="p">,</span> <span class="n">unsuccessful_leakage</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">reply</span>

    <span class="k">return</span> <span class="n">pull_set</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="wsimod.nodes.waste"></a>
    <div class="doc doc-contents first">

        <p>Created on Mon Nov 15 14:20:36 2021.</p>
<p>@author: bdobson</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="wsimod.nodes.waste.Waste" class="doc doc-heading">
            <code>Waste</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wsimod.nodes.nodes.Node" href="../reference-nodes/#wsimod.nodes.nodes.Node">Node</a></code></p>


        






              <details class="quote">
                <summary>Source code in <code>wsimod/nodes/waste.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Waste</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Outlet node that can receive any amount of water by pushes.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Node name</span>

<span class="sd">        Functions intended to call in orchestration:</span>
<span class="sd">            None</span>

<span class="sd">        Key assumptions:</span>
<span class="sd">            - Water &#39;disappears&#39; (leaves the model) from these nodes.</span>

<span class="sd">        Input data and parameter requirements:</span>
<span class="sd">            - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Update args</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># Update handlers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_deny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_deny</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_set_accept</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_check_accept</span>

        <span class="c1"># Mass balance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_in</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">push_set_accept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vqip</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Push set function that accepts all water.</span>

<span class="sd">        Args:</span>
<span class="sd">            vqip (dict): A VQIP that has been pushed (ignored)</span>

<span class="sd">        Returns:</span>
<span class="sd">            (dict): An empty VQIP, indicating all water was received</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.waste.Waste.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Outlet node that can receive any amount of water by pushes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="functions-intended-to-call-in-orchestration" open>
  <summary>Functions intended to call in orchestration</summary>
  <p>None</p>
</details>

<details class="key-assumptions" open>
  <summary>Key assumptions</summary>
  <ul>
<li>Water 'disappears' (leaves the model) from these nodes.</li>
</ul>
</details>

<details class="input-data-and-parameter-requirements" open>
  <summary>Input data and parameter requirements</summary>
  <ul>
<li>None</li>
</ul>
</details>
            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/waste.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Outlet node that can receive any amount of water by pushes.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Node name</span>

<span class="sd">    Functions intended to call in orchestration:</span>
<span class="sd">        None</span>

<span class="sd">    Key assumptions:</span>
<span class="sd">        - Water &#39;disappears&#39; (leaves the model) from these nodes.</span>

<span class="sd">    Input data and parameter requirements:</span>
<span class="sd">        - None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Update args</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># Update handlers</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_set_deny</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pull_check_deny</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">push_set_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_set_accept</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">push_check_handler</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_check_accept</span>

    <span class="c1"># Mass balance</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mass_balance_out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_in</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wsimod.nodes.waste.Waste.push_set_accept" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">push_set_accept</span><span class="p">(</span><span class="n">vqip</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Push set function that accepts all water.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vqip</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A VQIP that has been pushed (ignored)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An empty VQIP, indicating all water was received</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wsimod/nodes/waste.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">push_set_accept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vqip</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Push set function that accepts all water.</span>

<span class="sd">    Args:</span>
<span class="sd">        vqip (dict): A VQIP that has been pushed (ignored)</span>

<span class="sd">    Returns:</span>
<span class="sd">        (dict): An empty VQIP, indicating all water was received</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_vqip</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>